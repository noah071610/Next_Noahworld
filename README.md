<br/>

<div align=center><a href="https://noahworld.site"><img src="https://user-images.githubusercontent.com/74864925/129386391-a19ce0af-6610-41bc-b91e-9e75a18746fd.png"/></a></div>

# <div align=center>Noah world Blog</div>

#### <div align=center>Place to step up.</div>

<br/>

<div align=center>
<img src="https://travis-ci.org/joemccann/dillinger.svg?branch=master"/>&nbsp
  <img src="https://img.shields.io/github/stars/noah071610/Next_NoahWorld?style=social"/>&nbsp
  <img src="https://img.shields.io/github/watchers/noah071610/Next_NoahWorld?style=social"/>&nbsp
</div>

<br/>

<div width="300" align=center>
<img src="https://img.shields.io/badge/Photoshop-31A8FF?style=flat-square&logo=adobe-photoshop&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/HTML5-E34F26?style=flat-square&logo=HTML5&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/CSS3-1572B6?style=flat-square&logo=CSS3&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/SCSS-CC6699?style=flat-square&logo=Sass&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=flat-square&logo=JavaScript&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=TypeScript&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=React&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Next.js-000000?style=flat-square&logo=Next-dot-js&logoColor=white"/><br/>
<img src="https://img.shields.io/badge/Redux-764ABC?style=flat-square&logo=Redux&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Redux_Saga-999999?style=flat-square&logo=Redux-Saga&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Emotion-DB7093?style=flat-square&logo=styled-components&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Antd-0170FE?style=flat-square&logo=Ant-design&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Node.js-339933?style=flat-square&logo=node-dot-js&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Express-000000?style=flat-square&logo=Express&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Passport-34E27A?style=flat-square&logo=Passport&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Google_Login-4285F4?style=flat-square&logo=Google-Cloud&logoColor=white"/><br/>
<img src="https://img.shields.io/badge/MySQL-4479A1?style=flat-square&logo=MySQL&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Babel-F9DC3E?style=flat-square&logo=Babel&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Webpack-8DD6F9?style=flat-square&logo=Webpack&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Amazon_AWS-232F3E?style=flat-square&logo=Amazon-AWS&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/Linux-FCC624?style=flat-square&logo=Linux&logoColor=white"/>&nbsp;
<img src="https://img.shields.io/badge/NGINX-009639?style=flat-square&logo=NGINX&logoColor=white"/>&nbsp;
</div>

<br/>

<div align=center>
  <a href="https://github.com/noah071610" target="_blank"><img src="https://image.flaticon.com/icons/png/24/25/25657.png"/></a>&nbsp;
  <a href="https://www.instagram.com/salmonchobab" target="_blank"><img src="https://image.flaticon.com/icons/png/24/1409/1409946.png"/></a>&nbsp;
  <a href="https://velog.io/@noah071610" target="_blank"><img width="24" src="https://api.faviconkit.com/velog.io/144"/></a>&nbsp;
  <a href="mailto:noah071610@naver.com"><img src="https://image.flaticon.com/icons/png/24/552/552486.png"/></a>&nbsp;
  <a href="https://noahworld.site/portfolio" target="_blank"><img src="https://image.flaticon.com/icons/png/24/3135/3135715.png"/></a>&nbsp;
</div>

<br/>

<div align=center>
  <a href="https://noahworld.site"><img src="https://img.shields.io/badge/go_to_website-C3B1E3?style=for-the-badge"/>&nbsp;</a>
</div>

<br/><br/><br/><br/>

## About Noah World.

#### ë¬´ë¦¬í•˜ì§€ì•ŠëŠ” ê¹”ë”í•œ ë””ìì¸ì„ ëª©í‘œë¡œ ê°œì„¤í•œ ê°œì¸ ë¸”ë¡œê·¸.

<br/>

- **í˜ì´ì§€ ì „ë°˜**

ìµœì‹  ê¸€ ìƒë‹¨ ë°°ì¹˜, í•´ì‹œíƒœê·¸ì™€ ê²€ìƒ‰ê¸°ëŠ¥, ë¶€ë¬¸ë³„ íƒ‘ ê²Œì‹œê¸€ê³¼ ì¡°íšŒìˆ˜ ,ì¢‹ì•„ìš”ìˆ˜ ,ê²Œì‹œë‚ ì§œë¥¼ ê³µìœ í•©ë‹ˆë‹¤.

íšŒì›ê°€ì…, êµ¬ê¸€ ë¡œê·¸ì¸, ë¡œê·¸ì¸ ìœ ì§€, ë¡œê·¸ì•„ì›ƒ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì›íƒˆí‡´ ë“±ì˜ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

- **ì´ìš©ì**

ì´ìš©ìëŠ” ê²Œì‹œê¸€ ì‘ì„±ì€ ë¶ˆê°€ëŠ¥í•˜ë‚˜ ì¢‹ì•„ìš” ëŒ“ê¸€ ê¸°ëŠ¥ì„ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ìš©ìëŠ” ì•„ì´ì½˜ ì‚¬ì§„ ë³€ê²½ê³¼ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íšŒì›íƒˆí‡´ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ì´ìš©ìëŠ” ê°œì¸ í”„ë¡œí•„ ë¶€ë¶„ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ëœ ìµœê·¼ ë³¸ ê²Œì‹œê¸€ê³¼ ëŒ“ê¸€ì„ ì¡°íšŒ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- **ê´€ë¦¬ì**

ê´€ë¦¬ìë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì–´ë“œë¯¼ í˜ì´ì§€ë¥¼ ì´ìš©í•´ ê´€ë¦¬ìë§Œ ê²Œì‹œê¸€ì„ ì‘ì„± ìˆ˜ì • ì‚­ì œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>
<br/>

## Summary.

- í”„ë¡œì íŠ¸ ì¸ì› : ì¥í˜„ìˆ˜(Noah) ì™¸ 0ëª…
- í”„ë¡œì íŠ¸ ê¸°ê°„ : 2021/02 ~ 2021/05
- í”„ë¡œì íŠ¸ ì–¸ì–´:

  - ì˜ì–´ (ì „ë°˜ì ì¸ ë¸”ë¡œê·¸)
  - ì¼ë³¸ì–´ (í•œêµ­ì–´ ê°•ì˜ í˜ì´ì§€)
  - í•œêµ­ì–´ (í¬íŠ¸í´ë¦¬ì˜¤ í˜ì´ì§€)

<br/><br/>

## Overview.

<br/>

#### ğŸ“ &nbsp; íšŒì›ê°€ì…ë° ë¡œê·¸ì¸ì•„ì›ƒ, ë¹„ë°€ë²ˆí˜¸ ë³€ê²½, íƒˆí‡´ ì™¸ ë¡œê·¸ì¸ìœ ì§€ ê¸°ëŠ¥ êµ¬í˜„.

![ë…¹í™”_2021_06_03_23_30_16_462](https://user-images.githubusercontent.com/74864925/120664610-0a482100-c4c6-11eb-9294-4d8c3f868daa.gif)

```javascript
ğŸ“routes/user.ts

    router.post("/signUp", async (req: Request, res: Response, next: NextFunction) => {
      try {
        const salt = await bcrypt.genSalt(saltRounds); // saltë¥¼ ìƒì„±í•´ ë ˆì¸ë³´ìš°í…Œì´ë¸” ê³µê²©ì„ ëŒ€ë¹„í•©ë‹ˆë‹¤.
        if (req.body.email) {
          const exUser = await User.findOne({
            where: {
              email: req.body.email,
            },
          });
          if (exUser) {
            //ìœ ì €ê°€ ìˆë‹¤ë©´ íšŒì›ê°€ì…ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
            return res.status(403).send({
              success: false,
              message: "Your E-mail is already used, please Check one`s again",
            });
          }
        }
        if (req.body.password.length > 9) {
        //ë¹„ë°€ë²ˆí˜¸ ê¸¸ì´ëŠ” í´ë¼ì´ì–¸íŠ¸ë‹¨ì—ì„œ ë¨¼ì € ê±¸ëŸ¬ì£¼ë‚˜ ë”ë¸”ì²´í¬ í•´ì¤ë‹ˆë‹¤.
          return res
            .status(403)
            .send({ success: false, message: "Password have to be longer then 9 letters" });
        }
        const hashedPassword = await bcrypt.hash(req.body.password, salt);
        //bcryptë¡œ í•´ì‹œí•¨ìˆ˜ + ì†”íŒ…ì„ ì‚¬ìš©í•´ì„œ ì†Œì¤‘í•œ ìœ ì €ì˜ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ì•ˆí•©ë‹ˆë‹¤.
        await User.create({
          email: req.body.email,
          name: req.body.name,
          password: hashedPassword,
          icon: req.body.icon ? req.body.icon : "/images/blog/default-user.png",
        });
        res.status(200).send({ success: true, message: "Save your ID well! Let`s Login :)" });
      } catch (error) {
        console.error(error);
        return next(error);
      }
    });

```

<br/>

#### ğŸ“ &nbsp; êµ¬ê¸€ ë¡œê·¸ì¸ êµ¬í˜„.

![ë…¹í™”_2021_06_03_23_34_49_742](https://user-images.githubusercontent.com/74864925/120664616-0b794e00-c4c6-11eb-8fb1-37c0a1e97fd8.gif)

```javascript
ğŸ“Login/BlogLoginSection.tsx

  ...

  <GoogleBtn>
        <a href="https://api.noahworld.site/auth/google">
          <div>
            <img alt="google" src="https://img.icons8.com/color/144/000000/google-logo.png" />
            <h3 css={GoogleLogin}>Sign in with Google</h3>
          </div>
        </a>
  </GoogleBtn>

```

```javascript
ğŸ“server/index.ts

//passport.js ë¥¼ ì´ìš©í•˜ì—¬ ì‚¬ìš©ì ì¿ í‚¤ë¥¼ ì €ì¥í•˜ê³  íšŒì›ì •ë³´ë¥¼ ë§Œë“¤ì–´ DBì— ì €ì¥í•©ë‹ˆë‹¤. êµ¬ê¸€ ë¹„ë°€ë²ˆí˜¸ëŠ” ì ˆëŒ€! ì„œë²„ì—ì„œ ì·¨ê¸‰ ì•ˆí•©ë‹ˆë‹¤.
app.get("/auth/google", passport.authenticate("google", { scope: ["profile", "email"] }));

app.get(
  "/auth/google/callback",
  //êµ¬ê¸€ ì¸ì¦ì´ ì™„ë£Œë˜ê±°ë‚˜ ì‹¤íŒ¨í–ˆì„ë•Œ ê²½ë¡œë¥¼ ì„¤ì •í•´ì¤ë‹ˆë‹¤.
  passport.authenticate("google", { failureRedirect: "https://noahworld.site" }),
  function (req: Request, res: Response) {
    res.redirect("https://noahworld.site");
  }
);

```

<br/>

#### ğŸ“ &nbsp; ìœ ì € ì•„ì´ì½˜ì„ ìœ„í•œ ì´ë¯¸ì§€ ì—…ë¡œë“œì™€ ì´ë¯¸ì§€ Crop ê¸°ëŠ¥ì„ êµ¬í˜„.

![](https://user-images.githubusercontent.com/74864925/120664262-c1906800-c4c5-11eb-910e-58e5ae3f59ae.gif)

```javascript
ğŸ“profile/CropImageModal.tsx

  const handleOk = useCallback(() => {
    //5. blob ê°ì²´ì™€ user idë¥¼ í™œìš©í•´ ì„œë²„ì— ìš”ì²­í•˜ê¸°ìœ„í•´ formì„ ë§Œë“­ë‹ˆë‹¤.
    const form = new FormData();
    form.append("image", blob!);
    form.append("id", String(user?.id));
    dispatch({
      type: ADD_ICON_REQUEST,
      data: form,
    });
    setIsModalVisible(false);
    setUrl("");
    setUpImg(null);
  }, []);

  ...

  const onSelectFile = (e: React.ChangeEvent<HTMLInputElement>) => {
    //1-1. React-crop ê³µì‹ë¬¸ì„œë¥¼ ì°¸ì¡°í–ˆìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•´ì¤ë‹ˆë‹¤.
    if (e.target.files && e.target.files.length > 0) {
      const reader = new FileReader();
      reader.addEventListener("load", () => setUpImg(reader.result));
      reader.readAsDataURL(e.target.files[0]);
    }
  };

  const onLoad = useCallback((img) => {
    imgRef.current = img;
  }, []);

  useEffect(() => {
    //3. React-crop ê³µì‹ë¬¸ì„œë¥¼ ì°¸ì¡°í–ˆìŠµë‹ˆë‹¤. canvasì— ìë¥¸ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ëŠ” ë¡œì§ì…ë‹ˆë‹¤.
    if (!completedCrop || !previewCanvasRef.current || !imgRef.current) {
      return;
    }
    const image: any = imgRef.current;
    const canvas: any = previewCanvasRef.current;

    ...

    );
    new Promise(() => {
      canvas.toBlob(
        //4. ìë¥¸ ì´ë¯¸ì§€ë¥¼ Blob ê°ì²´ë¡œ ë°”ê¿” stateì— ì €ì¥í•©ë‹ˆë‹¤.
        (blob: Blob) => {
          setBlob(blob);
        },
        "image/png",
        1
      );
    });
  }, [completedCrop]);

  return (
    {/* 0. Icon ìˆ˜ì • (+ Crop Image)ëŠ” Modalì°½ì—ì„œ ì¼ì–´ë‚˜ë©° Modalì€ Antdë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. */}
    <Modal title="Icon Upload ğŸ–¼ï¸" visible={isModalVisible} onOk={handleOk} onCancel={handleCancel}>
      <h3>Set icon from Local storage</h3>
      {/* 1. Urlì„ ì´ìš©í•´ ì•„ì´ì½˜ì„ ì—…ë¡œë“œí• ì§€, fileì„ ì´ìš©í• ì§€ ì„ íƒí•©ë‹ˆë‹¤. */}
      <input
        style={{ marginBottom: "1.5rem" }}
        type="file"
        accept="image/*"
        disabled={url ? true : false}
        onChange={onSelectFile}
      />
      <h3>Set icon by using URL</h3>
      <Input
        disabled={upImg ? true : false}
        value={url}
        onChange={onChangeUrl}
        placeholder="https://"
      />

      {(url || upImg) && (
        <>
          {/* 2. ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ í™œìš©í•´ ì´ë¯¸ì§€ë¥¼ ìë¦…ë‹ˆë‹¤. */}
          <h3>Crop the image for icon size.</h3>
          <ReactCrop
            crossorigin="anonymous"

            ...

```

---

<br/>

#### ğŸ“ &nbsp; multerë¥¼ ì‚¬ìš©í•´ ì´ë¯¸ì§€ë¥¼ AWS-S3ì— ì €ì¥.

```javascript
ğŸ“server/routes/user.ts

// ì•„ì´ì½˜ ì´ë¯¸ì§€ë¥¼ ì„œë²„ì—ì„œ ì—…ë¡œë“œí•˜ëŠ” ê³¼ì •.

const upload = multer({
  storage: multerS3({
    // AWS.S3ì— ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤.
    s3: new AWS.S3(),
    bucket: "noahworld",
    key(req: Request, file: Express.Multer.File, cb) {
      cb(null, `original/${Date.now()}_${path.basename(file.originalname)}`);
    },
  }),
  limits: { fileSize: 20 * 1024 * 1024 },
});

router.post(
  "/icon",
  upload.single("image"),
  async (req: Request, res: Response, next: NextFunction) => {
    //ìœ ì €ê°€ fileì„ ì—…ë¡œë“œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì•„ì´ì½˜ì„ ì—…ë°ì´íŠ¸í•œ ê²½ìš°
    try {
      User.update(
        { icon: (req.file as Express.MulterS3.File).location.replace(/\/original\//, "/thumb/") },
        { where: { id: req.body.id } }
      );
      res.json((req.file as Express.MulterS3.File).location.replace(/\/original\//, "/thumb/"));
    } catch (error) {
      console.error(error);
      return next(error);
    }
  }
);

router.delete("/icon/:UserId", async (req: Request, res: Response, next: NextFunction) => {
  //ìœ ì €ê°€ ì•„ì´ì½˜ì„ ì‚­ì œí•˜ëŠ”ê²½ìš°, ë¯¸ë¦¬ ì €ì¥ë˜ì–´ìˆëŠ” default ê°’ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.
  try {
    User.update(
      { icon: "/images/blog/default-user.png" },
      { where: { id: parseInt(req.params.UserId, 10) } }
    );
    res.send({ success: true });
  } catch (error) {
    console.error(error);
    return next(error);
  }
});

```

---

<br/>

#### ğŸ“ &nbsp; TOP ì¢‹ì•„ìš”, ëŒ“ê¸€, ì¡°íšŒìˆ˜ ê²Œì‹œë¬¼ ê·¸ë¦¬ê³  í•´ì‹œíƒœê·¸ë¥¼ ë©”ì¸í˜ì´ì§€ì— ë°°ì¹˜.

![2](https://user-images.githubusercontent.com/74864925/120672071-f0f6a300-c4cc-11eb-8629-906ab6789419.gif)

```javascript
ğŸ“server/routes/post.ts

      const getAttributesFromPosts = await Post.findAll({
      order: [["createdAt", "DESC"]],
      attributes: ["id", "hit"],
      include: [
        {
          model: User,
          as: "PostLikers",
          attributes: ["id"],
        },
        {
          model: Comment,
          include: [
            {
              model: User,
              attributes: ["id"],
            },
          ],
        },
      ],
    }).then((result) =>
      result.map((post) => {
        //ì „ì²´ í¬ìŠ¤íŠ¸ì¤‘ ì•„ì´ë””,ì¢‹ì•„ìš”ìˆ˜,ì½”ë©˜íŠ¸ìˆ˜,ì¡°íšŒìˆ˜ë¥¼ ë°°ì—´í˜•íƒœë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
        //ë°°ì—´ì‚¬ìš©ì´ìœ  : sort ë©”ì˜ë“œë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´.
        return [post.id, post.PostLikers.length, post.Comments.length, post.hit];
      })
    );

    const mostCalculator = (i: number) => {
      if (getAttributesFromPosts.length > 0) {
        //ëŠë‚Œí‘œë¥¼ ì‚¬ìš©í•œ ì´ìœ  : ë°°ì—´ê°’ì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ê°’ ì¶©ì¡±
        //ì˜ˆë¥¼ë“¤ì–´ í¬ìŠ¤íŠ¸ê°€ ë‹¬ë‘ í•˜ë‚˜ë”ë¼ë„ topí¬ìŠ¤íŠ¸ 3ë¶€ë¶„ì— ì „ë¶€ ê°™ì€ê²Œì‹œë¬¼ì´ ì˜¬ë¼ê°ìœ¼ë¡œ ì¶©ì¡±í•©ë‹ˆë‹¤.
        return getAttributesFromPosts.sort((a, b) => b[i]! - a[i]!)[0][0];
      }
    };
    //ì‹œí€„ë¼ì´ì¦ˆê°€ 5ë²„ì „ ì´ìƒë¶€í„° findOneë©”ì˜ë“œì— undefined ê°’ì„ í—ˆìš©í•˜ì§€ ì•Šê¸°ë•Œë¬¸ì— ifë¬¸ì„ ë„£ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.
    if (mostCalculator(1) && mostCalculator(2) && mostCalculator(3)) {
      const mostLikedPost = await Post.findOne({
      where: {
        id: mostLikedId(1),
      },
      attributes: {
        exclude: ["content"],

      ...

    });
    const mostCommentedPost = await Post.findOne({
      where: {
        id: mostCommentsId(2),
      },
      attributes: {
        exclude: ["content"],

      ...

    });
    const mostViewedPost = await Post.findOne({
      where: {
        id: mostViewedId(3),
      },
      attributes: {
        exclude: ["content"],

      ...


```

---

<br/>

#### ğŸ“ &nbsp; WYSIWYGì˜ Markdownì„ ì´ìš©í•œ í’ì„±í•œ í¬ìŠ¤íŒ… êµ¬í˜„.

![1](https://user-images.githubusercontent.com/74864925/120672060-ef2cdf80-c4cc-11eb-803f-d3cc81f03a95.gif)

<br/>

#### ğŸ“ &nbsp; ë¦¬ëª¨ì½˜ ë˜ëŠ” í—¤ë”ë¥¼ ì‚¬ìš©í•œ ê°„í¸í•œ ê²Œì‹œë¬¼ ì¸í„°í˜ì´ìŠ¤.

![3](https://user-images.githubusercontent.com/74864925/120672074-f18f3980-c4cc-11eb-9810-5d3103ed7534.gif)

![ë…¹í™”_2021_06_04_02_39_20_101](https://user-images.githubusercontent.com/74864925/120688644-3e2f4080-c4de-11eb-953c-aabde63a0496.gif)

<br/>

#### ğŸ“ &nbsp; ê²Œì‹œê¸€ì•ˆ í…ìŠ¤íŠ¸ë¡œëœ í‚¤ì›Œë“œë“¤ì„ ì •ê·œì‹ìœ¼ë¡œ íŒŒì•…í•´ ë§í¬ë¡œ ë³€í™˜.

```javascript
ğŸ“post/[id].tsx

  ...

    useEffect(() => {
    const tagContent = post?.content?.split(/(#[^\s#+^<]+)/g).map((v) => {
      //ì •ê·œì‹ì„ ì‚¬ìš©í•´ #name í˜•ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í‚¤ì›Œë“œ ì°¾ì•„ëƒ…ë‹ˆë‹¤.
      if (v.match(/(#.*")/g)) {
        //ìœ„ì§€ê¸€ì—ë””í„°ì˜ ê²°ê³¼ê°’ì´ ì´ í•¨ìˆ˜ì— ì˜ í˜¸í™˜ ë˜ì§€ì•Šì•„ ì¶”ê°€ì ìœ¼ë¡œ ê±¸ëŸ¬ì£¼ì—ˆìŠµë‹ˆë‹¤.
        return v;
      }
      //ìœ íŠœë¸Œ í‚¤ì›Œë“œê°€ ìˆë‹¤ë©´ (ìœ„ì§€ê¸€ì—ë””í„°ê°€ ì œê³µí•˜ì§€ ì•Šì•„ì„œ ì¶”ê°€ì ìœ¼ë¡œ í‚¤ì›Œë“œë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤) iframeìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
      if (v.match(/(#youtube:)/g)) {
        return `<iframe class="youtube" title="YouTube video player" frameborder="0" allow="accelerometer;
        autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
        src="https://www.youtube.com/embed/${v.slice(
          9
        )}"></iframe>`;
      }
      if (v.match(/(#[^\s#+^<]+)/g)) {
        return `<a class="hashtag">${v}</a>`;
      }
      return v;
    });
    const fullContentRemoveComma = post && tagContent?.join("");
    // ë‚˜ì¤‘ì— ì´ ê°’ì€ html parserë¥¼ ì‚¬ìš©í•´ ê²Œì‹œê¸€ì— ë¡œë“œë©ë‹ˆë‹¤.
    fullContentRemoveComma && setFullcontent(fullContentRemoveComma);
  }, [post]);

  ...

```

---

<br/>

#### ğŸ“ &nbsp; ëŒ“ê¸€, ë‹µê¸€ ë° ì¢‹ì•„ìš” êµ¬í˜„.

![4](https://user-images.githubusercontent.com/74864925/120672080-f227d000-c4cc-11eb-8fb8-ab601d7d840c.gif)

<br/>

#### ğŸ“ &nbsp; í•´ì‹œíƒœê·¸ & í‚¤ì›Œë“œ ê²€ìƒ‰.

<br/>

![ë…¹í™”_2021_06_04_02_04_40_674](https://user-images.githubusercontent.com/74864925/120684139-518bdd00-c4d9-11eb-8dc7-939cc1b6c35b.gif)

#### ğŸ“ &nbsp; Infinite Scrollì„ êµ¬í˜„.

![5](https://user-images.githubusercontent.com/74864925/120672081-f2c06680-c4cc-11eb-8277-4de43501cf60.gif)

```javascript
ğŸ“pages/[category]/index.tsx

  useEffect(() => {
    function onScroll() {
      if (
        //Yì¶• ìŠ¤í¬ë¡¤ ê°’ê³¼ í™”ë©´ì— ë³´ì´ëŠ” í˜ì´ì§€ ê¸¸ì´
        window.scrollY + document.documentElement.clientHeight >
        //ì „ì²´ í˜ì´ì§€ì˜ ê¸¸ì´
        document.documentElement.scrollHeight - 300
      ) {
        if (hasMorePosts && !loadMorePostsLoading && (techPosts || dailyPosts.length > 6)) {
          //í¬ìŠ¤íŠ¸ê°€ ë” ìˆê³  , í¬ìŠ¤íŠ¸ë¥¼ ë¡œë”©ì¤‘ì´ ì•„ë‹ˆê³  , í¬ìŠ¤íŠ¸ê°€ 6ê°œ ì´ˆê³¼ì´ë©´ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.
          //6ê°œì”© ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ë° 6ê°œë³´ë‹¤ ì•ˆëœë‹¤ë©´ ë‹¹ì—°íˆ ê°’ì„ ì „ë¶€ ê°€ì ¸ì˜¨ê²ƒì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
          const LastId =
            (techPosts || dailyPosts) &&
            (techPosts || dailyPosts)[(techPosts || dailyPosts).length - 1].id;
            // ì´ë¯¸ ë¶ˆëŸ¬ì˜¨ í¬ìŠ¤íŠ¸ë“¤(ë°°ì—´)ì— ë§ˆì§€ë§‰ê°’ì˜ ì•„ì´ë””ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
          dispatch({
            type: LOAD_MORE_POSTS_REQUEST,
            data: {
              LastId,
              category,
            },
          });
        }
      }
    }
    window.addEventListener("scroll", onScroll);
    return () => {
      //ë©”ëª¨ë¦¬ë¦­ì„ ë°©ì§€í•˜ê¸°ìœ„í•´ unmountì‹œ removeEventListner
      window.removeEventListener("scroll", onScroll);
    };
  }, [hasMorePosts, loadCategoryPostsLoading, techPosts, dailyPosts]);

```

```javascript
ğŸ“server/routes/post.ts

router.get("/morepost/:category", async (req: Request, res: Response, next: NextFunction) => {
  try {
    const category = req.params.category;
    let where = {
      //Last ID ë³´ë‹¤ ë‚®ì€ ì¦‰, ì´ì „ê²Œì‹œë¬¼ë“¤ì„ ì°¾ìŠµë‹ˆë‹¤.
      [Op.and]: [{ id: { [Op.lt]: req.query.lastId } }, { category }],
    };
    const morePosts = await Post.findAll({
      //6ê°œì”© ë¶ˆëŸ¬ì˜¤ê³  ê²Œì‹œë‚ ì§œë¥¼ ë‚´ë¦¼ì°¨ë¡œ ì •ë ¬í•©ë‹ˆë‹¤.
      where,
      limit: 6,
      order: [["createdAt", "DESC"]],
      include: [
        //í•´ì‹œíƒœê·¸, ì¢‹ì•„ìš”í•œ ìœ ì €ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤.
        {
          model: Hashtag,
          attributes: ["name"],
        },
        {
          model: User,
          as: "PostLikers",
          attributes: ["id"],
        },
      ],
    });
    res.status(200).json({ morePosts, category });
  } catch (error) {
    console.error(error);
    return next(error);
  }
});

```

```javascript
ğŸ“@reducers/post.ts

      ...

      case LOAD_MORE_POSTS_SUCCESS:
        draft.loadMorePostsLoading = false;
        draft.loadMorePostsDone = true;
        //ì¹´í…Œê³ ë¦¬ì— ë§ëŠ” í¬ìŠ¤íŠ¸ë¥¼ ë„£ì–´ì¤ë‹ˆë‹¤.
        const moreTechPosts =
          action.data.category === "tech" && draft.techPosts.concat(action.data.morePosts);
        const moreDailyPosts =
          action.data.category === "daily" && draft.dailyPosts.concat(action.data.morePosts);
        draft.techPosts = moreTechPosts;
        draft.dailyPosts = moreDailyPosts;
        //ë¶ˆëŸ¬ì˜¨ í¬ìŠ¤íŠ¸ê°€ limitê°’ì¸ 6ê°œë¼ëŠ”ê²ƒì€ ë¶ˆëŸ¬ì˜¨ í¬ìŠ¤íŠ¸ê°€ ë” ìˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.
        //ë§Œì•½ ê°¯ìˆ˜ê°€ ë”± ë§ì•„ì„œ ë‹¤ìŒ ê°’ì´ ì—†ë‹¤ê³  í•´ë„ ê·¸ ìš”ì²­ì€ 0ê°œì„ìœ¼ë¡œ falseê°€ ë©ë‹ˆë‹¤.
        draft.hasMorePosts = action.data.morePosts.length === 6;
        break;

      ...

```

---

<br/>

#### ğŸ“ &nbsp; ì¼ë³¸ì¸ì„ ìœ„í•œ í•œêµ­ì–´ ê°•ì˜ í˜ì´ì§€ êµ¬í˜„.

![6](https://user-images.githubusercontent.com/74864925/120672083-f358fd00-c4cc-11eb-9ba7-639d6b8f91f4.gif)

<br/>

#### ğŸ“ &nbsp; ëœë¤ í€´ì¦ˆ êµ¬í˜„.

![7](https://user-images.githubusercontent.com/74864925/120672085-f358fd00-c4cc-11eb-971b-efd25922f20e.gif)

```javascript
ğŸ“class/QuizForm.tsx

  const onClickNextQuiz = useCallback(() => {
    //ì´ í€´ì¦ˆ ê°¯ìˆ˜ì¤‘ í•˜ë‚˜ë¥¼ ëœë¤ìœ¼ë¡œ ë½‘ì•„ì˜µë‹ˆë‹¤.
    let myRandNum = Math.floor(Math.random() * quizzes.length);
    //ë§Œì•½ ëœë¤ìœ¼ë¡œ ë½‘ì€ ê°’ì´ í˜„ì¬ê°’ì´ë‘ ì¼ì¹˜í•œë‹¤ë©´...
    if (myRandNum === randomQuiz) {
      //2. ëœë¤ìœ¼ë¡œ ë½‘ì€ê°’ì´ ë§ˆì§€ë§‰ê°’ì¸ ìƒíƒœì—ì„œ +1 ì„ í•˜ê²Œ ë˜ë©´ ì˜¤ë¥˜ê°€ ë‚˜ê²Œ ë˜ê¸° ë•Œë¬¸ì—
      //   ì²«ë²ˆì§¸ ê°’ìœ¼ë¡œ ë³€ê²½í•´ì„œ ë¦¬í„´í•´ì¤ë‹ˆë‹¤.
      if (myRandNum === quizzes.length - 1) {
        setRandomQuiz(0);
        setViewQuizAnswer(false);
        setQuizAnswer("");
        return;
      }
      //1. ëœë¤ìœ¼ë¡œ ë½‘ì€ ê°’ì˜ ë‹¤ìŒê°’ì„ ë¦¬í„´í•©ë‹ˆë‹¤.
      setRandomQuiz(myRandNum + 1);
      setViewQuizAnswer(false);
      setQuizAnswer("");
      return;
    }
    setRandomQuiz(myRandNum);
    setViewQuizAnswer(false);
    setQuizAnswer("");
  }, [quizzes.length, randomQuiz, setQuizAnswer]);

  const onClickQuizSubmit = useCallback(() => {
    //í€´ì¦ˆì— ê°’ì„ ë„£ì§€ ì•Šì•˜ë‹¤ë©´ ì œì¶œë²„íŠ¼ì´ ì‘ë™í•˜ì§€ ì•Šê²Œ í•©ë‹ˆë‹¤.
    if (quizAnswer === "") {
      message.error("ç­”ãˆã‚’æ›¸ã„ã¦ãã ã•ã„ã­ï¼");
      return;
    }
    setViewQuizAnswer(true);
  }, [quizAnswer]);

  ...

```

---

<br/>

#### ğŸ“ &nbsp; ê·¸ì™¸...

- Reduxì— Redux Sagaë¥¼ ì¶”ê°€í•´ ë¹„ë™ê¸°ë¥¼ êµ¬í˜„í•˜ê³  immerë¥¼ ì ìš©í•´ ë¶ˆë³€ì„± ì¤€ìˆ˜ì˜ ë¶ˆí¸í•¨ì„ í•´ì†Œ.
- cors ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•´ ê¸°ë³¸ì ì¸ ë¸Œë¼ìš°ì €-í”„ë¡ íŠ¸ì„œë²„-ë°±ì„œë²„ê°„ cors ë¬¸ì œë¥¼ í•´ê²°.
- Passport.jsì™€ Google Login APIë¥¼ í™œìš©í•œ ë¡œê·¸ì¸, ì¿ í‚¤ì™€ ì„¸ì…˜ì„ ì‚¬ìš©í•œ ë¡œê·¸ì¸ ìœ ì§€ê¸°ëŠ¥ êµ¬í˜„.
- bcrypt, node-helmet, https, dot-env, ì¿ í‚¤ì˜ secretê³¼ expires, Admin ì „ìš© ë¹„ë°€ë²ˆí˜¸, ë¯¼ê°í•œ ì •ë³´ í´ë¼ì´ì–¸íŠ¸ ì·¨ê¸‰ X, ì˜ˆì™¸ì²˜ë¦¬ ë“±ìœ¼ë¡œ ì›¹ ë³´ì•ˆì„ ì¤€ìˆ˜í•˜ë„ë¡ ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.

<br/>

## Question.

<br/>

> Next.js ì‚¬ìš©ì´ìœ ?

SPAì˜ SEO ì´ìŠˆê°€ ë¸”ë¡œê·¸ íŠ¹ì„±ìƒ ì¹˜ëª…ì ì´ë¼ê³  ìƒê°ë˜ì–´ SSRì˜ Next.jsë¥¼ ì‚¬ìš©í•˜ê²Œ ë¬ìŠµë‹ˆë‹¤.

<br/>

> Typescript ì“¸ë§Œí•œê°€ìš”?

ì²˜ìŒì—ëŠ” êµ¬ì§€ì¨ì•¼ ë˜ë‚˜ ì‹¶ì—ˆëŠ”ë° ì •ë§ ì˜ëª»ëœ ìƒê°ì´ì˜€ìŠµë‹ˆë‹¤. ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ì½”ë“œì—ëŸ¬ë¥¼ ì¤„ì´ê³  ì‹ ë¢°ì„±ì„ ë†’ì´ëŠ” ì•„ì£¼ ì¢‹ì€ ìŠˆí¼ì…‹ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ anyì™€ unknownì„ ë‚¨ë°œí•˜ë‹¤ë©´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ì˜ë¯¸ê°€ ë§ì´ í‡´ìƒ‰ëœë‹¤ê³  ìƒê°ë˜ì–´ ì´ê²ƒì„ ì—¼ë‘í•˜ê³  íƒ€ì´í•‘í–ˆìŠµë‹ˆë‹¤.

<br/>

> AWS ì´ìš©í•  ë§Œ í•˜ë‚˜ìš”?

ì§€ê¸ˆê°™ì´ ê½¤ë‚˜ ëª¸ì§‘ì´ ë‚˜ê°€ëŠ” í”„ë¡œì íŠ¸ëŠ” AWS+MySQL(or Oracle) ì“¸ë§Œí•˜ë‹¤ê³  ìƒê°í•˜ëŠ”ë° ê°„ë‹¨í•œ í† ì´í”„ë¡œì íŠ¸ëŠ” firebaseê°€ ë” ì¢‹ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

<br/>

> Styled-components VS others

ì €ëŠ” ê°œì¸ì ìœ¼ë¡œ í´ë˜ìŠ¤ëª… ì‘ëª…ì´ êµ‰ì¥íˆ í˜ë“¤ì—ˆê¸° ë•Œë¬¸ì— CSS-in-JSë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤ ê·¸ë¦¬ê³  Styled-componentsë³´ë‹¤ Emotion ë¥¼ ë” ì„ í˜¸í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì°¨ê¸°ì‘ì€ Emotionê³¼ TailwindCSSë“±ì„ ì ê·¹ì ìœ¼ë¡œ ë„ì…í–ˆìŠµë‹ˆë‹¤.

<br/>

## Retrospective.

<br/>

1. í”„ë¡œì íŠ¸ê°€ ì •ì  í¬íŠ¸í´ë¦¬ì˜¤ ì‚¬ì´íŠ¸ => ë¸”ë¡œê·¸ ì‚¬ì´íŠ¸ => React App => Next App ìˆœìœ¼ë¡œ ê¸‰ë³€í•˜ë©° ë§ì€ ì‹œê°„ì ì¸ ì†í•´ë¥¼ ì…ì—ˆìŠµë‹ˆë‹¤. ì´ˆë°˜ì— ì²´ê³„ì ì¸ ê³„íšì´ ëŠ¥ë¥ ì„ ë†’ì¸ë‹¤ëŠ” ê²ƒì„ ì ˆì‹¤íˆ ê¹¨ë‹¬ì•˜ê³  ì°¨ê¸° í”„ë¡œì íŠ¸ `Fall IN Asia` ì—ì„  ìš”êµ¬ë¶„ì„ê³¼ ì‹œì¥ì¡°ì‚¬, ì™€ì´ì–´ í”„ë ˆì„ ì‘ì„± ë“± ì²´ê³„ì ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ê¸°íší–ˆìŠµë‹ˆë‹¤.

2. SCSSì™€ CSS-in-JSëŠ” ì¤‘êµ¬ë‚œë°©ìœ¼ë¡œ í¼ì ¸ìˆê³  ê¸€ë¡œë²ŒìŠ¤íƒ€ì¼ì„ 2ê°œë‚˜ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ìœ ì§€ë³´ìˆ˜ì¤‘ì´ë©° ì°¨ê¸° í”„ë¡œì íŠ¸ 'Fall IN Asia' ì—ì„  SCSSë¥¼ ì œê±°í•˜ê³  Emotionì— TailWindCSSë¥¼ ë„£ì–´ CSS-in-JSë§Œ ì‚¬ìš©í•˜ê³ , ë¶„ë¦¬í•˜ê³ , ì •ë¦¬í•˜ì—¬ ì²´ê³„í™” í–ˆìŠµë‹ˆë‹¤.

3. FormDataë¡œ Imageë¥¼ ì„œë²„ì— ì €ì¥í•˜ëŠ” ê³¼ì •ì—ì„œ ì—¬ëŸ¬ ê°€ì§€ ì‹œí–‰ì°©ì˜¤ê°€ ë§ì•˜ìŠµë‹ˆë‹¤. base64ì˜ ì„±ëŠ¥ì €í•˜ ì´ìŠˆ, blob URL ë°”ì¸ë”©ë²•, multer ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‘ë™ë°©ì‹ ë“±ì„ ìˆ™ì§€í–ˆìŠµë‹ˆë‹¤.

4. WSì˜ Route53 DNS ì„¤ì •ì—ì„œ ISPê°€ ë„ë©”ì¸ì„ ì¬ë“±ë¡í•˜ëŠ”ë° ë©°ì¹ ì´ ê±¸ë¦¬ëŠ”ë°ë„ ë¶ˆêµ¬, ì´ ì‚¬ì‹¤ì„ ì „í˜€ ëª°ë¼ (ë‹¨ìˆœ ì—°ê²°ì•ˆë¨ìœ¼ë¡œ í‘œì‹œë˜ì—ˆìŒ) ë‚´ë¶€ì—ì„œ ë¬¸ì œë¥¼ ì°¾ëŠëƒ ì´í‹€ì„ ì§€ìƒˆìš´ ì ì´ ìˆìŠµë‹ˆë‹¤. TCP/IP 4ê³„ì¸µ, ë¼ìš°í„° ì—°ê²°ë°©ì‹ , TCPì™€ UDPì˜ ì°¨ì´, HTTP ë“±ì„ ê³µë¶€í•˜ë©° ì›¹ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤.

5. HTTP ì§€ì‹ê³¼ ì›¹ë³´ì•ˆìª½ì´ ë§ì´ ë¶€ì¡±í•˜ë‹¤ê³  ëŠê¼ˆê³  CORSê°€ ì •ë§ í˜ë“¤ì—ˆìŠµë‹ˆë‹¤. ì°¨ê¸° í”„ë¡œì íŠ¸ë¶€í„°ëŠ” HTTPë¥¼ ê³µë¶€í•´ ë„¤íŠ¸ì›Œí¬íƒ­ì˜ Req & Res ì˜ HTTP headerë¥¼ ì½ìœ¼ë©° ë³´ë‹¤ì‰½ê²Œ ì˜¤ë¥˜ë¥¼ í•´ê²°í–ˆê³  SQL-injection XSSë“±ì˜ ë³´ì•ˆë²•ì„ ì–•ê²Œë‚˜ë§ˆ ìˆ™ì§€í•˜ê³  ì‚¬ì´íŠ¸ì— ì ìš©í–ˆìŠµë‹ˆë‹¤.

<br/><br/>

## Thank you for taking your time

<br/>

| Date       | Version | Update                                        |
| ---------- | ------- | --------------------------------------------- |
| 2020/05/29 | v1.0    | Final Update for first deployment through AWS |
| 2020/06/04 | v1.1    | Solve NGINX proxy problem                     |
| 2020/08/10 | v1.1    | Remove Portfolio page and optimization        |

<br/>

í”¼ë“œë°±ì€ í•­ìƒ ì €ë¥¼ ì„±ì¥ì‹œí‚¤ê²Œ í•©ë‹ˆë‹¤.

ê¶ê¸ˆí•œê²Œ ìˆìœ¼ì‹œë©´ noah071610@naver.com ìœ¼ë¡œ ì–¸ì œë“ ì§€ í¸í•˜ê²Œ ì—°ë½ì£¼ì„¸ìš”.

ê¸´ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.

<a href="https://noahworld.site">ë…¸ì•„ì›”ë“œ ë¸”ë¡œê·¸ ë°”ë¡œê°€ê¸° ğŸ˜»</a>

<br/><br/><br/><br/>
