{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Noah\\\\Desktop\\\\Project\\\\Noahworld\\\\client\\\\components\\\\Blog\\\\Profile\\\\InfoModal.tsx\";\nimport { Input, message, Form, Modal } from \"antd\";\nimport { useRouter } from \"next/dist/client/router\";\nimport React, { memo, useCallback, useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { CHANGE_NAME_REQUEST, CHANGE_PASSWORD_REQUEST, CONFIRM_PASSWORD_REQUEST, CONFIRM_PASSWORD_SUCCESS, LOG_OUT_REQUEST, WITHDRWAL_REQUEST } from \"../../../@reducers/user\";\nimport useInput from \"../../../util/useInput\";\nimport { jsx as ___EmotionJSX } from \"@emotion/react\";\nconst InfoModal = /*#__PURE__*/memo(({\n  setIsModalVisible,\n  setChangePassword,\n  setChangeNickname,\n  isModalVisible,\n  changePassword,\n  changeNickname\n}) => {\n  const dispatch = useDispatch();\n  const {\n    user,\n    confirmPassword,\n    changePasswordDone,\n    confirmPasswordError,\n    changePasswordError,\n    withdrawalDone,\n    withdrawalError,\n    changeNameDone,\n    changeNameError\n  } = useSelector(state => state.user);\n  const router = useRouter();\n  const userName = user === null || user === void 0 ? void 0 : user.name;\n  const [password, onChangePassword] = useInput(\"\");\n  const [newPassword, onChangeNewPassword] = useInput(\"\");\n  const [newName, onChangeNewName] = useInput(userName);\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.googleId) {\n      dispatch({\n        type: CONFIRM_PASSWORD_SUCCESS\n      });\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [user]);\n  useEffect(() => {\n    if (changePasswordDone) {\n      message.success(\"Change your password well!\");\n      router.push(\"/\");\n      setIsModalVisible(false);\n      setChangePassword(false);\n      return;\n    }\n\n    if (changeNameDone) {\n      message.success(\"Change your nickname well!\");\n      setIsModalVisible(false);\n      setChangeNickname(false);\n      return;\n    }\n\n    if (withdrawalDone) {\n      setIsModalVisible(false);\n      message.success(\"Withdrawed. Thank you for using ! see you next time.\");\n      router.push(\"/\");\n      return;\n    }\n\n    if (changePasswordError || changeNameError || withdrawalError) {\n      message.error(\"Unexpected Error! please try again or feedback to us\");\n      setChangePassword(false);\n      setChangeNickname(false);\n      return;\n    }\n\n    if (confirmPasswordError) {\n      message.error(\"Wrong Password! please try again or feedback to us\");\n      return;\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [changePasswordDone, changePasswordError, confirmPasswordError, withdrawalDone, withdrawalError, changeNameDone, changeNameError]);\n  const handleOk = useCallback(() => {\n    dispatch({\n      type: CONFIRM_PASSWORD_REQUEST,\n      data: {\n        password,\n        user\n      }\n    });\n  }, [password, user]);\n  const handleCancel = useCallback(() => {\n    setIsModalVisible(false);\n    setChangePassword(false);\n    setChangeNickname(false);\n  }, []);\n  const onSubmitChangePassword = useCallback(() => {\n    dispatch({\n      type: CHANGE_PASSWORD_REQUEST,\n      data: {\n        newPassword,\n        user\n      }\n    });\n    dispatch({\n      type: LOG_OUT_REQUEST\n    });\n  }, [newPassword, user]);\n  const onsubmitChangeName = useCallback(() => {\n    dispatch({\n      type: CHANGE_NAME_REQUEST,\n      data: {\n        newName,\n        UserId: user === null || user === void 0 ? void 0 : user.id\n      }\n    });\n  }, [newName, user]);\n  const onSubmitWithdrawal = useCallback(() => {\n    dispatch({\n      type: WITHDRWAL_REQUEST,\n      data: user === null || user === void 0 ? void 0 : user.id\n    });\n    dispatch({\n      type: LOG_OUT_REQUEST\n    });\n  }, [user]);\n  return ___EmotionJSX(Modal, {\n    title: \"User Infomation\",\n    visible: isModalVisible,\n    onOk: confirmPassword ? changePassword ? onSubmitChangePassword : changeNickname ? onsubmitChangeName : onSubmitWithdrawal : handleOk,\n    onCancel: handleCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, confirmPassword ? changePassword ? ___EmotionJSX(Form, {\n    name: \"nest-messages\",\n    initialValues: {\n      remember: false\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, \"Please write your new password.\"), ___EmotionJSX(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }), ___EmotionJSX(Form.Item, {\n    name: \"Password\",\n    rules: [{\n      required: true\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(Input.Password, {\n    value: newPassword,\n    onChange: onChangeNewPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  })), ___EmotionJSX(Form.Item, {\n    name: \"Confirm\",\n    dependencies: [\"Password\"],\n    hasFeedback: true,\n    rules: [{\n      required: true\n    }, ({\n      getFieldValue\n    }) => ({\n      validator(_, value) {\n        if (!value || getFieldValue(\"Password\") === value) {\n          return Promise.resolve();\n        }\n\n        return Promise.reject(new Error(\"The two passwords that you entered do not match!\"));\n      }\n\n    })],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(Input.Password, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }))) : changeNickname ? ___EmotionJSX(Form, {\n    name: \"nest-messages\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }\n  }, ___EmotionJSX(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, \"Please write your new nickname.\"), ___EmotionJSX(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 15\n    }\n  }), ___EmotionJSX(Form.Item, {\n    name: \"name\",\n    rules: [{\n      required: true\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, ___EmotionJSX(Input, {\n    value: newName,\n    onChange: onChangeNewName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }))) : ___EmotionJSX(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, \"Would you really like to withdraw? \\uD83D\\uDE3F\") : ___EmotionJSX(React.Fragment, null, ___EmotionJSX(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, \"Confirm your password.\"), ___EmotionJSX(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }), ___EmotionJSX(Input.Password, {\n    value: password,\n    onChange: onChangePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  })));\n});\nexport default /*#__PURE__*/memo(InfoModal);","map":{"version":3,"sources":["C:/Users/Noah/Desktop/Project/Noahworld/client/components/Blog/Profile/InfoModal.tsx"],"names":["Input","message","Form","Modal","useRouter","React","memo","useCallback","useEffect","useDispatch","useSelector","CHANGE_NAME_REQUEST","CHANGE_PASSWORD_REQUEST","CONFIRM_PASSWORD_REQUEST","CONFIRM_PASSWORD_SUCCESS","LOG_OUT_REQUEST","WITHDRWAL_REQUEST","useInput","InfoModal","setIsModalVisible","setChangePassword","setChangeNickname","isModalVisible","changePassword","changeNickname","dispatch","user","confirmPassword","changePasswordDone","confirmPasswordError","changePasswordError","withdrawalDone","withdrawalError","changeNameDone","changeNameError","state","router","userName","name","password","onChangePassword","newPassword","onChangeNewPassword","newName","onChangeNewName","googleId","type","success","push","error","handleOk","data","handleCancel","onSubmitChangePassword","onsubmitChangeName","UserId","id","onSubmitWithdrawal","remember","required","getFieldValue","validator","_","value","Promise","resolve","reject","Error"],"mappings":"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","sourcesContent":["import { Input, message, Form, Modal } from \"antd\";\r\nimport { useRouter } from \"next/dist/client/router\";\r\nimport React, { FC, memo, useCallback, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../../@reducers\";\r\nimport {\r\n  CHANGE_NAME_REQUEST,\r\n  CHANGE_PASSWORD_REQUEST,\r\n  CONFIRM_PASSWORD_REQUEST,\r\n  CONFIRM_PASSWORD_SUCCESS,\r\n  LOG_OUT_REQUEST,\r\n  WITHDRWAL_REQUEST,\r\n} from \"../../../@reducers/user\";\r\nimport useInput from \"../../../util/useInput\";\r\n\r\ninterface InfoModal {\r\n  setIsModalVisible: (e: boolean) => void;\r\n  setChangePassword: (e: boolean) => void;\r\n  setChangeNickname: (e: boolean) => void;\r\n  isModalVisible: boolean;\r\n  changePassword: boolean;\r\n  changeNickname: boolean;\r\n}\r\n\r\nconst InfoModal: FC<InfoModal> = memo(\r\n  ({\r\n    setIsModalVisible,\r\n    setChangePassword,\r\n    setChangeNickname,\r\n    isModalVisible,\r\n    changePassword,\r\n    changeNickname,\r\n  }) => {\r\n    const dispatch = useDispatch();\r\n    const {\r\n      user,\r\n      confirmPassword,\r\n      changePasswordDone,\r\n      confirmPasswordError,\r\n      changePasswordError,\r\n      withdrawalDone,\r\n      withdrawalError,\r\n      changeNameDone,\r\n      changeNameError,\r\n    } = useSelector((state: RootState) => state.user);\r\n    const router = useRouter();\r\n    const userName: string = user?.name;\r\n\r\n    const [password, onChangePassword] = useInput(\"\");\r\n    const [newPassword, onChangeNewPassword] = useInput(\"\");\r\n    const [newName, onChangeNewName] = useInput(userName);\r\n\r\n    useEffect(() => {\r\n      if (user?.googleId) {\r\n        dispatch({\r\n          type: CONFIRM_PASSWORD_SUCCESS,\r\n        });\r\n      }\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n      if (changePasswordDone) {\r\n        message.success(\"Change your password well!\");\r\n        router.push(\"/\");\r\n        setIsModalVisible(false);\r\n        setChangePassword(false);\r\n        return;\r\n      }\r\n      if (changeNameDone) {\r\n        message.success(\"Change your nickname well!\");\r\n        setIsModalVisible(false);\r\n        setChangeNickname(false);\r\n        return;\r\n      }\r\n      if (withdrawalDone) {\r\n        setIsModalVisible(false);\r\n        message.success(\"Withdrawed. Thank you for using ! see you next time.\");\r\n        router.push(\"/\");\r\n        return;\r\n      }\r\n      if (changePasswordError || changeNameError || withdrawalError) {\r\n        message.error(\"Unexpected Error! please try again or feedback to us\");\r\n        setChangePassword(false);\r\n        setChangeNickname(false);\r\n        return;\r\n      }\r\n      if (confirmPasswordError) {\r\n        message.error(\"Wrong Password! please try again or feedback to us\");\r\n        return;\r\n      }\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n      changePasswordDone,\r\n      changePasswordError,\r\n      confirmPasswordError,\r\n      withdrawalDone,\r\n      withdrawalError,\r\n      changeNameDone,\r\n      changeNameError,\r\n    ]);\r\n    const handleOk = useCallback(() => {\r\n      dispatch({\r\n        type: CONFIRM_PASSWORD_REQUEST,\r\n        data: { password, user },\r\n      });\r\n    }, [password, user]);\r\n\r\n    const handleCancel = useCallback(() => {\r\n      setIsModalVisible(false);\r\n      setChangePassword(false);\r\n      setChangeNickname(false);\r\n    }, []);\r\n\r\n    const onSubmitChangePassword = useCallback(() => {\r\n      dispatch({\r\n        type: CHANGE_PASSWORD_REQUEST,\r\n        data: { newPassword, user },\r\n      });\r\n      dispatch({\r\n        type: LOG_OUT_REQUEST,\r\n      });\r\n    }, [newPassword, user]);\r\n\r\n    const onsubmitChangeName = useCallback(() => {\r\n      dispatch({\r\n        type: CHANGE_NAME_REQUEST,\r\n        data: { newName, UserId: user?.id },\r\n      });\r\n    }, [newName, user]);\r\n\r\n    const onSubmitWithdrawal = useCallback(() => {\r\n      dispatch({\r\n        type: WITHDRWAL_REQUEST,\r\n        data: user?.id,\r\n      });\r\n      dispatch({\r\n        type: LOG_OUT_REQUEST,\r\n      });\r\n    }, [user]);\r\n\r\n    return (\r\n      <Modal\r\n        title=\"User Infomation\"\r\n        visible={isModalVisible}\r\n        onOk={\r\n          confirmPassword\r\n            ? changePassword\r\n              ? onSubmitChangePassword\r\n              : changeNickname\r\n              ? onsubmitChangeName\r\n              : onSubmitWithdrawal\r\n            : handleOk\r\n        }\r\n        onCancel={handleCancel}\r\n      >\r\n        {confirmPassword ? (\r\n          changePassword ? (\r\n            <Form name=\"nest-messages\" initialValues={{ remember: false }}>\r\n              <p>Please write your new password.</p>\r\n              <br />\r\n              <Form.Item name=\"Password\" rules={[{ required: true }]}>\r\n                <Input.Password value={newPassword} onChange={onChangeNewPassword} />\r\n              </Form.Item>\r\n              <Form.Item\r\n                name=\"Confirm\"\r\n                dependencies={[\"Password\"]}\r\n                hasFeedback\r\n                rules={[\r\n                  {\r\n                    required: true,\r\n                  },\r\n                  ({ getFieldValue }) => ({\r\n                    validator(_, value) {\r\n                      if (!value || getFieldValue(\"Password\") === value) {\r\n                        return Promise.resolve();\r\n                      }\r\n                      return Promise.reject(\r\n                        new Error(\"The two passwords that you entered do not match!\")\r\n                      );\r\n                    },\r\n                  }),\r\n                ]}\r\n              >\r\n                <Input.Password />\r\n              </Form.Item>\r\n            </Form>\r\n          ) : changeNickname ? (\r\n            <Form name=\"nest-messages\">\r\n              <p>Please write your new nickname.</p>\r\n              <br />\r\n              <Form.Item name=\"name\" rules={[{ required: true }]}>\r\n                <Input value={newName} onChange={onChangeNewName} />\r\n              </Form.Item>\r\n            </Form>\r\n          ) : (\r\n            <h2>Would you really like to withdraw? ðŸ˜¿</h2>\r\n          )\r\n        ) : (\r\n          <>\r\n            <p>Confirm your password.</p>\r\n            <br />\r\n            <Input.Password value={password} onChange={onChangePassword} />\r\n          </>\r\n        )}\r\n      </Modal>\r\n    );\r\n  }\r\n);\r\n\r\nexport default memo(InfoModal);\r\n"]},"metadata":{},"sourceType":"module"}